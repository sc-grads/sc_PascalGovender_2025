name: Teams Notification Trigger

on:
  pull_request:
    types:
      - closed

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Notify Teams
        if: github.event.pull_request.merged == true
        uses: neonidian/teams-notify-build-status@v3
        with:
          webhookUrl: ${{ secrets.PR_WEBHOOKURL }}
          title:  ğŸš¨ Pascal's Merge Confirmation ğŸš¨
          titleBackgroundColor: 'success'  # Green for success
          status: 'Approved'
          message: >-
            **âœ… Merge Confirmation**
            ---------------------------------
            ğŸ“Œ **PR Details**
               - **Title:** ${{ github.event.pull_request.title }}
               - **Description:** ${{ github.event.pull_request.body || 'No description provided' }}

            ğŸ› ï¸ **Action Summary**
               - **Author:** ${{ github.event.pull_request.user.login }}
               - **Approved By:** ${{ github.event.pull_request.merged_by.login }}

            ğŸ”€ **Branch Information**
               - **Source Branch:** ${{ github.event.pull_request.head.ref }}
               - **Target Branch:** ${{ github.event.pull_request.base.ref }}

            ğŸ”— **[View Pull Request](${{ github.event.pull_request.html_url }})**
        env:
          SHOULD_DISPLAY_ACTOR_LABEL: true
          SHOULD_DISPLAY_VIEW_RUN_BUTTON: true
          SHOULD_DISPLAY_VIEW_COMMIT_BUTTON: true
